<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CookBook ‚Äî –°–º–∞—á–Ω—ñ —Å—Ç—Ä–∞–≤–∏</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="icon" type="image/png" href="favicon/burger.png">
<link rel="preconnect" href="https://images.unsplash.com">
<link rel="preconnect" href="https://images.pexels.com">
<link rel="dns-prefetch" href="https://images.unsplash.com">
<link rel="dns-prefetch" href="https://images.pexels.com">
<style>
    :root {
        --primary: #2E8B57;
        --primary-light: #3CB371;
        --primary-dark: #006400;
        --secondary: #DAA520;
        --light: #F5FFFA;
        --lighter: #F0FFF0;
        --text: #2F4F4F;
        --text-light: #556B2F;
        --white: #ffffff;
        --shadow: rgba(46, 139, 87, 0.15);
        --dark-bg: #1a1a1a;
        --dark-text: #f0f0f0;
        --dark-light: #2d2d2d;
        --card-bg: #ffffff;
        --modal-bg: #ffffff;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Segoe UI', 'Roboto', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        background-color: #1a1a1a;
        color: white;
        position: relative;
        transform: translateZ(0);
        backface-visibility: hidden;
    }

    body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                    url('https://images.unsplash.com/photo-1490818387583-1baba5e638af?w=1200&q=80&auto=format&fit=crop') center/cover no-repeat;
        z-index: -2;
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
    }

    body.dark-theme::before {
        background: linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.8)), 
                    url('https://images.unsplash.com/photo-1490818387583-1baba5e638af?w=1200&q=80&auto=format&fit=crop') center/cover no-repeat;
    }

    /* –í–µ—Ä—Ö–Ω—è –ø–∞–Ω–µ–ª—å */
    .header-container {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        padding: 0 40px;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 1000;
        height: 70px;
    }

    .burger-menu {
        display: none;
        background: none;
        border: none;
        color: var(--white);
        font-size: 28px;
        cursor: pointer;
        padding: 10px;
    }

    .nav-buttons {
        display: flex;
        gap: 10px;
    }

    .nav-btn {
        background: rgba(255, 255, 255, 0.25);
        border: 1px solid rgba(255, 255, 255, 0.4);
        padding: 14px 24px;
        border-radius: 50px;
        color: var(--white);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
        text-decoration: none;
        white-space: nowrap;
    }

    .nav-btn:hover {
        background: rgba(255, 255, 255, 0.35);
        transform: translateY(-2px);
    }

    .logo {
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 32px;
        font-weight: 800;
        color: var(--white);
        letter-spacing: 1px;
    }

    .logo a {
        text-decoration: none;
        color: white;
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .theme-switcher {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        color: white;
        font-size: 20px;
        transition: 0.3s;
        margin-left: 15px;
        flex-shrink: 0;
    }

    /* –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –æ–¥–∏–Ω–∏—Ü—å */
    .converter-popup {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: var(--primary);
        color: white;
        padding: 15px;
        border-radius: 50%;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 100;
        box-shadow: 0 4px 15px rgba(46, 139, 87, 0.3);
        transition: 0.3s;
        transform: translateZ(0);
    }

    .converter-popup:hover {
        transform: scale(1.1) translateZ(0);
        background: var(--primary-dark);
    }

    .converter-modal, .calorie-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }

    .converter-content, .calorie-content {
        background: var(--modal-bg);
        padding: 30px;
        border-radius: 15px;
        width: 95%;
        max-width: 500px;
        max-height: 85vh;
        overflow-y: auto;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        border: 2px solid var(--primary-light);
        color: var(--text);
    }

    .dark-theme .converter-content,
    .dark-theme .calorie-content {
        background: var(--dark-light);
        color: var(--dark-text);
    }

    .calorie-content {
        max-width: 550px;
    }

    .calorie-ingredients-container {
        max-height: 300px;
        overflow-y: auto;
        margin-bottom: 20px;
        padding-right: 10px;
    }

    /* –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç */
    .content-wrapper {
        max-width: 1200px;
        margin: 0 auto;
        padding: 30px 20px;
        flex: 1;
        width: 100%;
    }

    .page-title {
        text-align: center;
        margin: 20px 0 40px;
        position: relative;
    }

    .page-title h1 {
        font-size: 2.5rem;
        color: var(--secondary);
        margin-bottom: 10px;
        display: inline-block;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .page-title h1:after {
        content: '';
        display: block;
        width: 100px;
        height: 4px;
        background: var(--primary-light);
        margin: 10px auto;
        border-radius: 2px;
    }

    .page-title p {
        font-size: 1.1rem;
        color: rgba(255, 255, 255, 0.9);
        max-width: 600px;
        margin: 0 auto;
        line-height: 1.8;
        padding: 0 15px;
    }

    .tools-section {
        background: rgba(255, 255, 255, 0.1);
        padding: 30px;
        border-radius: 15px;
        margin: 30px 0;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        border: 2px solid var(--primary-light);
    }

    .tools-section h3 {
        color: white;
        margin-bottom: 20px;
        font-size: 1.8rem;
    }

    .tools-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .tool-card {
        background: rgba(255, 255, 255, 0.9);
        padding: 25px;
        border-radius: 10px;
        text-align: center;
        border: 2px solid var(--primary-light);
        transition: transform 0.3s ease;
        cursor: pointer;
        color: #333;
        transform: translateZ(0);
        backface-visibility: hidden;
    }

    .dark-theme .tool-card {
        background: rgba(45, 45, 45, 0.9);
        color: var(--dark-text);
    }

    .tool-card:hover {
        transform: translateY(-5px) translateZ(0);
        box-shadow: 0 5px 15px rgba(46, 139, 87, 0.2);
    }

    .tool-icon {
        font-size: 40px;
        color: var(--primary);
        margin-bottom: 15px;
    }

    /* –ü—ñ–¥–±—ñ—Ä —Ä–µ—Ü–µ–ø—Ç—ñ–≤ */
    .recipe-finder {
        background: rgba(255, 255, 255, 0.1);
        padding: 30px;
        border-radius: 15px;
        margin: 30px 0;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        border: 2px solid var(--primary-light);
    }

    .recipe-finder h3 {
        color: white;
        margin-bottom: 10px;
    }

    .recipe-finder p {
        color: rgba(255, 255, 255, 0.8);
        margin-bottom: 20px;
    }

    .finder-questions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 25px;
    }

    .question-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .question-group label {
        color: white;
        font-weight: 600;
    }

    .question-group select {
        padding: 10px;
        border: 2px solid var(--primary-light);
        border-radius: 8px;
        font-size: 16px;
        background: rgba(255, 255, 255, 0.9);
        color: #333;
        cursor: pointer;
    }

    .dark-theme .question-group select {
        background: rgba(45, 45, 45, 0.9);
        color: var(--dark-text);
    }

    .finder-result {
        background: rgba(255, 255, 255, 0.15);
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
        display: none;
        border: 2px solid var(--primary-light);
        color: white;
    }

    .finder-recipe-link {
        display: block;
        text-decoration: none;
        color: inherit;
        transition: all 0.3s ease;
        border-radius: 8px;
        transform: translateZ(0);
    }

    .finder-recipe-link:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-2px) translateZ(0);
    }

    /* –†–µ—Ü–µ–ø—Ç–∏ */
    .categories {
        text-align: center;
        margin: 40px 0 30px;
        padding: 30px 20px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        border: 2px solid var(--primary-light);
        position: relative;
        z-index: 1;
    }

    .categories h2 {
        margin-bottom: 25px;
        color: white;
        font-size: 1.8rem;
    }

    .categories button {
        margin: 8px 6px;
        padding: 14px 28px;
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid var(--primary-light);
        border-radius: 50px;
        color: #333;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s;
        font-size: 16px;
        white-space: nowrap;
        transform: translateZ(0);
        backface-visibility: hidden;
    }

    .dark-theme .categories button {
        background: rgba(45, 45, 45, 0.9);
        color: var(--dark-text);
    }

    .categories button:hover,
    .categories button.active {
        background: var(--primary);
        color: white;
        border-color: var(--primary);
        transform: translateY(-3px) translateZ(0);
    }

    .recipes-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 25px;
        padding: 20px 0 50px;
        position: relative;
        z-index: 1;
    }

    .recipe {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 0;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        border: 2px solid var(--primary-light);
        height: 100%;
        display: flex;
        flex-direction: column;
        text-decoration: none;
        color: #333;
        position: relative;
        transform: translateZ(0);
        backface-visibility: hidden;
        contain: layout style paint;
    }

    .dark-theme .recipe {
        background: rgba(45, 45, 45, 0.9);
        color: var(--dark-text);
    }

    .recipe:hover {
        transform: translateY(-8px) translateZ(0);
        box-shadow: 0 10px 25px rgba(46, 139, 87, 0.3);
    }

    .recipe-img-container {
        width: 100%;
        height: 200px;
        overflow: hidden;
        position: relative;
        flex-shrink: 0;
        background: linear-gradient(45deg, var(--primary-light), var(--primary-dark));
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .recipe-img-container::before {
        content: '';
        position: absolute;
        width: 40px;
        height: 40px;
        border: 3px solid rgba(255,255,255,0.3);
        border-top-color: white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        opacity: 0;
        transition: opacity 0.3s;
        z-index: 1;
    }

    .recipe-img-container.loading::before {
        opacity: 1;
    }

    .recipe-img-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
        transform: translateZ(0);
        background: linear-gradient(45deg, var(--primary-light), var(--primary-dark));
    }

    .recipe-img-container img.loaded {
        filter: blur(0);
    }

    .recipe-img-container img:not(.loaded) {
        filter: blur(10px);
    }

    .recipe:hover .recipe-img-container img {
        transform: scale(1.08) translateZ(0);
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    .recipe-category {
        position: absolute;
        top: 15px;
        right: 15px;
        background: var(--primary);
        color: white;
        padding: 6px 15px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        z-index: 2;
    }

    .recipe-content {
        padding: 20px;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        position: relative;
        z-index: 1;
    }

    .recipe h3 {
        margin: 0 0 10px;
        color: var(--primary);
        font-size: 22px;
        font-weight: 700;
        line-height: 1.3;
    }

    .dark-theme .recipe h3 {
        color: var(--secondary);
    }

    .recipe p {
        color: #666;
        margin: 8px 0;
        flex-grow: 1;
        font-size: 15px;
        line-height: 1.5;
    }

    .dark-theme .recipe p {
        color: #aaa;
    }

    .recipe-time {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--secondary);
        font-weight: 600;
        margin-top: 15px;
        font-size: 15px;
    }

    .like-btn {
        background: rgba(0, 0, 0, 0.4);
        border: none;
        font-size: 20px;
        cursor: pointer;
        color: white;
        transition: 0.3s;
        position: absolute;
        top: 15px;
        left: 15px;
        z-index: 3;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transform: translateZ(0);
    }

    .like-btn:hover {
        background: rgba(0, 0, 0, 0.6);
        transform: scale(1.1) translateZ(0);
    }

    .like-btn.active {
        color: #ff4757;
    }

    /* –ü—ñ–¥–≤–∞–ª */
    footer {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: var(--white);
        padding: 60px 0 30px;
        margin-top: auto;
        position: relative;
        z-index: 2;
    }

    .footer-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 40px;
    }

    .social-icons {
        display: flex;
        gap: 20px;
        margin-top: 20px;
    }

    .social-icon {
        font-size: 22px;
        color: rgba(255, 255, 255, 0.9);
        transition: all 0.3s ease;
        text-decoration: none;
        transform: translateZ(0);
    }

    .social-icon:hover {
        color: var(--secondary);
        transform: translateY(-3px) translateZ(0);
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å */
    @media (max-width: 992px) {
        .recipes-container {
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .recipe-img-container {
            height: 180px;
        }
    }

    @media (max-width: 768px) {
        .header-container {
            padding: 0 20px;
            height: 60px;
        }
        
        .burger-menu {
            display: block;
        }
        
        .nav-buttons {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--primary-dark);
            flex-direction: column;
            padding: 15px;
            z-index: 1000;
        }
        
        .nav-buttons.active {
            display: flex;
        }
        
        .nav-btn {
            width: 100%;
            justify-content: center;
            padding: 12px 20px;
        }
        
        .recipes-container {
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .converter-popup {
            bottom: 70px;
            right: 20px;
        }
        
        .tools-grid {
            grid-template-columns: 1fr;
        }
        
        .finder-questions {
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .page-title h1 {
            font-size: 2rem;
        }
        
        .page-title p {
            font-size: 1rem;
        }
        
        .tools-section,
        .recipe-finder,
        .categories {
            padding: 20px;
            margin: 20px 0;
        }
        
        .categories {
            padding: 20px 15px;
        }
        
        .categories button {
            padding: 10px 18px;
            font-size: 15px;
            margin: 5px 4px;
        }
        
        .content-wrapper {
            padding: 20px 15px;
        }
        
        .recipe {
            border-radius: 12px;
        }
        
        .recipe-img-container {
            height: 160px;
        }
        
        .recipe h3 {
            font-size: 20px;
        }
        
        .converter-content,
        .calorie-content {
            padding: 20px 15px;
        }
    }

    @media (max-width: 480px) {
        .header-container {
            padding: 0 15px;
        }
        
        .logo {
            font-size: 26px;
        }
        
        .logo a {
            gap: 10px;
        }
        
        .page-title h1 {
            font-size: 1.8rem;
        }
        
        .recipes-container {
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .recipe-img-container {
            height: 180px;
        }
        
        .converter-content,
        .calorie-content {
            padding: 15px;
        }
        
        .categories button {
            padding: 8px 15px;
            font-size: 14px;
        }
    }

    /* –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö */
    @media (hover: none) {
        .recipe:hover {
            transform: none;
        }
        
        .recipe:hover .recipe-img-container img {
            transform: none;
        }
        
        .categories button:hover {
            transform: none;
        }
        
        .tool-card:hover {
            transform: none;
        }
        
        .nav-btn:hover {
            transform: none;
        }
    }
</style>
</head>
<body>

<div class="header-container">
    <button class="burger-menu" onclick="toggleMenu()">
        <i class="fas fa-bars"></i>
    </button>
    
    <div class="nav-buttons" id="navButtons">
        <a href="index.html" class="nav-btn"><i class="fas fa-home"></i> –ì–æ–ª–æ–≤–Ω–∞</a>
        <a href="strava.html" class="nav-btn"><i class="fas fa-utensils"></i> –°–º–∞—á–Ω—ñ —Å—Ç—Ä–∞–≤–∏</a>
        <a href="navfour.html" class="nav-btn"><i class="fas fa-lightbulb"></i> –ö—É—Ö–æ–Ω–Ω—ñ –ø–æ—Ä–∞–¥–∏</a>
        <a href="pronas.html" class="nav-btn"><i class="fas fa-info-circle"></i> –ü—Ä–æ –Ω–∞—Å</a>
    </div>
    
    <div class="logo">
        <a href="index.html">
            <span class="logo-icon">üçî</span>
            <span class="logo-text">CookBook</span>
        </a>
    </div>
    
    <button class="theme-switcher" onclick="toggleTheme()" title="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É">
        <i class="fas fa-moon"></i>
    </button>
</div>

<!-- –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –æ–¥–∏–Ω–∏—Ü—å -->
<div class="converter-popup" onclick="openConverter()" title="–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –æ–¥–∏–Ω–∏—Ü—å">
    <i class="fas fa-balance-scale"></i>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞ -->
<div class="converter-modal" id="converterModal">
    <div class="converter-content">
        <h3><i class="fas fa-balance-scale"></i> –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –∫—É–ª—ñ–Ω–∞—Ä–Ω–∏—Ö –æ–¥–∏–Ω–∏—Ü—å</h3>
        <p style="margin-bottom: 20px; color: var(--text-light);">–ö–æ–Ω–≤–µ—Ä—Ç—É–π—Ç–µ –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –æ–¥–∏–Ω–∏—Ü—è–º–∏ –≤–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è</p>
        
        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 15px; align-items: end;">
            <div>
                <label for="converterValue">–ó–Ω–∞—á–µ–Ω–Ω—è:</label>
                <input type="number" id="converterValue" value="100" style="width: 100%; padding: 10px; border: 2px solid var(--primary-light); border-radius: 8px; background: var(--light); color: var(--text);">
            </div>
            
            <div style="text-align: center; padding-bottom: 10px;">
                <i class="fas fa-exchange-alt" style="font-size: 24px; color: var(--primary);"></i>
            </div>
            
            <div>
                <label for="converterResult">–†–µ–∑—É–ª—å—Ç–∞—Ç:</label>
                <input type="text" id="converterResult" readonly style="width: 100%; padding: 10px; border: 2px solid var(--secondary); border-radius: 8px; background: var(--lighter); color: var(--text);">
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
            <div>
                <label for="fromUnit">–ó –æ–¥–∏–Ω–∏—Ü—ñ:</label>
                <select id="fromUnit" style="width: 100%; padding: 10px; border: 2px solid var(--primary-light); border-radius: 8px; background: var(--light); color: var(--text);">
                    <option value="grams">–ì—Ä–∞–º–∏ (–≥)</option>
                    <option value="ml">–ú—ñ–ª—ñ–ª—ñ—Ç—Ä–∏ (–º–ª)</option>
                    <option value="cups">–ß–∞—à–∫–∏</option>
                    <option value="tbsp">–°—Ç–æ–ª–æ–≤—ñ –ª–æ–∂–∫–∏</option>
                    <option value="tsp">–ß–∞–π–Ω—ñ –ª–æ–∂–∫–∏</option>
                </select>
            </div>
            
            <div>
                <label for="toUnit">–í –æ–¥–∏–Ω–∏—Ü—é:</label>
                <select id="toUnit" style="width: 100%; padding: 10px; border: 2px solid var(--primary-light); border-radius: 8px; background: var(--light); color: var(--text);">
                    <option value="grams">–ì—Ä–∞–º–∏ (–≥)</option>
                    <option value="ml">–ú—ñ–ª—ñ–ª—ñ—Ç—Ä–∏ (–º–ª)</option>
                    <option value="cups" selected>–ß–∞—à–∫–∏</option>
                    <option value="tbsp">–°—Ç–æ–ª–æ–≤—ñ –ª–æ–∂–∫–∏</option>
                    <option value="tsp">–ß–∞–π–Ω—ñ –ª–æ–∂–∫–∏</option>
                </select>
            </div>
        </div>
        
        <button onclick="convertUnits()" class="nav-btn" style="width: 100%; margin-top: 10px; background: var(--secondary); color: white;">
            <i class="fas fa-calculator"></i> –í–∏–∫–æ–Ω–∞—Ç–∏
        </button>
        
        <button onclick="closeConverter()" class="nav-btn" style="width: 100%; margin-top: 10px; background: var(--primary); color: white;">
            <i class="fas fa-times"></i> –ó–∞–∫—Ä–∏—Ç–∏
        </button>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –∫–∞–ª–æ—Ä—ñ–π -->
<div class="calorie-modal" id="calorieModal">
    <div class="calorie-content">
        <h3><i class="fas fa-calculator"></i> –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–∞–ª–æ—Ä—ñ–π–Ω–æ—Å—Ç—ñ</h3>
        
        <div class="calorie-ingredients-container" id="calorieIngredients">
            <p style="color: var(--text-light); text-align: center; padding: 20px;">–î–æ–¥–∞–π—Ç–µ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –∫–∞–ª–æ—Ä—ñ–π</p>
        </div>
        
        <div style="display: flex; gap: 10px; margin-top: 20px;">
            <input type="text" id="newIngredient" placeholder="–ù–∞–∑–≤–∞ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—É" style="flex: 1; padding: 10px; border: 2px solid var(--primary-light); border-radius: 8px; background: var(--light); color: var(--text);">
            <input type="number" id="newWeight" placeholder="–í–∞–≥–∞ (–≥)" min="0" style="width: 100px; padding: 10px; border: 2px solid var(--primary-light); border-radius: 8px; background: var(--light); color: var(--text);">
            <button onclick="addIngredient()" class="nav-btn" style="background: var(--secondary); color: white; padding: 10px 15px;">
                <i class="fas fa-plus"></i> –î–æ–¥–∞—Ç–∏
            </button>
        </div>
        
        <div style="margin-top: 20px; padding: 15px; background: var(--light); border-radius: 10px; border: 2px solid var(--primary-light);">
            <h4 style="color: var(--primary); margin-bottom: 10px;">–ó–∞–≥–∞–ª—å–Ω–∞ –∫–∞–ª–æ—Ä—ñ–π–Ω—ñ—Å—Ç—å:</h4>
            <p id="totalCalories" style="font-size: 28px; font-weight: bold; color: var(--primary); text-align: center; margin: 10px 0;">0 –∫–∫–∞–ª</p>
        </div>
        
        <button onclick="closeCalorieCalculator()" class="nav-btn" style="width: 100%; margin-top: 15px; background: var(--primary); color: white;">
            <i class="fas fa-times"></i> –ó–∞–∫—Ä–∏—Ç–∏
        </button>
    </div>
</div>

<div class="content-wrapper">
    <div class="page-title">
        <h1>–°–º–∞—á–Ω—ñ —Å—Ç—Ä–∞–≤–∏</h1>
        <p>–í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–ª—è —Å–µ–±–µ –Ω–∞–π–∫—Ä–∞—â—ñ —Ä–µ—Ü–µ–ø—Ç–∏ –¥–ª—è –±—É–¥—å-—è–∫–æ—ó –Ω–∞–≥–æ–¥–∏. –ì–æ—Ç—É–π—Ç–µ –∑ –Ω–∞—Å–æ–ª–æ–¥–æ—é!</p>
    </div>

    <!-- –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ -->
    <div class="tools-section">
        <h3><i class="fas fa-tools"></i> –ö–æ—Ä–∏—Å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏</h3>
        <div class="tools-grid">
            <div class="tool-card" onclick="showCalorieCalculator()">
                <div class="tool-icon">
                    <i class="fas fa-calculator"></i>
                </div>
                <h4>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–∞–ª–æ—Ä—ñ–π</h4>
                <p>–†–æ–∑—Ä–∞—Ö—É–π—Ç–µ –∫–∞–ª–æ—Ä—ñ–π–Ω—ñ—Å—Ç—å –≤–∞—à–∏—Ö —Å—Ç—Ä–∞–≤</p>
            </div>
            
            <div class="tool-card" onclick="openConverter()">
                <div class="tool-icon">
                    <i class="fas fa-balance-scale"></i>
                </div>
                <h4>–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –æ–¥–∏–Ω–∏—Ü—å</h4>
                <p>–ö–æ–Ω–≤–µ—Ä—Ç—É–π—Ç–µ –º—ñ–∂ –≥—Ä–∞–º–∞–º–∏, —á–∞—à–∫–∞–º–∏ —Ç–∞ –ª–æ–∂–∫–∞–º–∏</p>
            </div>
            
            <div class="tool-card" onclick="showRecipeFinder()">
                <div class="tool-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h4>–ü—ñ–¥–±—ñ—Ä —Ä–µ—Ü–µ–ø—Ç—ñ–≤</h4>
                <p>–ó–Ω–∞–π–¥—ñ—Ç—å —ñ–¥–µ–∞–ª—å–Ω–∏–π —Ä–µ—Ü–µ–ø—Ç –∑–∞ –≤–∞—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏</p>
            </div>
        </div>
    </div>

    <!-- –ü—ñ–¥–±—ñ—Ä —Ä–µ—Ü–µ–ø—Ç—ñ–≤ -->
    <div class="recipe-finder" id="recipeFinder">
        <h3><i class="fas fa-search"></i> –ü—ñ–¥–±–µ—Ä—ñ—Ç—å —ñ–¥–µ–∞–ª—å–Ω–∏–π —Ä–µ—Ü–µ–ø—Ç</h3>
        <p style="margin-bottom: 20px;">–í—ñ–¥–ø–æ–≤—ñ–¥–∞–π—Ç–µ –Ω–∞ –ø–∏—Ç–∞–Ω–Ω—è —Ç–∞ –º–∏ –ø—ñ–¥–±–µ—Ä–µ–º–æ —Ä–µ—Ü–µ–ø—Ç —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—Å</p>
        
        <div class="finder-questions">
            <div class="question-group">
                <label for="time"><i class="far fa-clock"></i> –ß–∞—Å –ø—Ä–∏–≥–æ—Ç—É–≤–∞–Ω–Ω—è:</label>
                <select id="time">
                    <option value="">–û–±–µ—Ä—ñ—Ç—å —á–∞—Å</option>
                    <option value="30">–î–æ 30 —Ö–≤</option>
                    <option value="60">–î–æ 1 –≥–æ–¥–∏–Ω–∏</option>
                    <option value="120">–ë—ñ–ª—å—à–µ 1 –≥–æ–¥–∏–Ω–∏</option>
                </select>
            </div>
            
            <div class="question-group">
                <label for="difficulty"><i class="fas fa-signal"></i> –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:</label>
                <select id="difficulty">
                    <option value="">–û–±–µ—Ä—ñ—Ç—å —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å</option>
                    <option value="easy">–õ–µ–≥–∫–æ</option>
                    <option value="medium">–°–µ—Ä–µ–¥–Ω—è</option>
                    <option value="hard">–°–∫–ª–∞–¥–Ω–æ</option>
                </select>
            </div>
            
            <div class="question-group">
                <label for="category"><i class="fas fa-utensils"></i> –ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</label>
                <select id="category">
                    <option value="">–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é</option>
                    <option value="soup">–°—É–ø–∏</option>
                    <option value="dessert">–î–µ—Å–µ—Ä—Ç–∏</option>
                    <option value="meat">–ú'—è—Å–Ω—ñ —Å—Ç—Ä–∞–≤–∏</option>
                    <option value="vegetarian">–í–µ–≥–µ—Ç–∞—Ä—ñ–∞–Ω—Å—å–∫—ñ</option>
                    <option value="breakfast">–°–Ω—ñ–¥–∞–Ω–∫–∏</option>
                </select>
            </div>
        </div>
        
        <button onclick="findRecipe()" class="nav-btn" style="width: 100%; background: var(--primary); color: white;">
            <i class="fas fa-magic"></i> –ó–Ω–∞–π—Ç–∏ —Ä–µ—Ü–µ–ø—Ç
        </button>
        
        <div class="finder-result" id="finderResult">
            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ –¥–æ–¥–∞–Ω–∏–π –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
        </div>
    </div>

    <div class="categories">
        <h2>–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Å—Ç—Ä–∞–≤</h2>
        <button onclick="filterRecipes('all')" class="active"><i class="fas fa-utensils"></i> –£—Å—ñ</button>
        <button onclick="filterRecipes('soup')"><i class="fas fa-utensil-spoon"></i> –°—É–ø–∏</button>
        <button onclick="filterRecipes('dessert')"><i class="fas fa-ice-cream"></i> –î–µ—Å–µ—Ä—Ç–∏</button>
        <button onclick="filterRecipes('meat')"><i class="fas fa-drumstick-bite"></i> –ú'—è—Å–Ω—ñ —Å—Ç—Ä–∞–≤–∏</button>
        <button onclick="filterRecipes('vegetarian')"><i class="fas fa-leaf"></i> –í–µ–≥–µ—Ç–∞—Ä—ñ–∞–Ω—Å—å–∫—ñ</button>
        <button onclick="filterRecipes('breakfast')"><i class="fas fa-egg"></i> –°–Ω—ñ–¥–∞–Ω–∫–∏</button>
    </div>

    <div class="recipes-container" id="recipes">
        <!-- –†–µ—Ü–µ–ø—Ç–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ —á–µ—Ä–µ–∑ JavaScript -->
    </div>
</div>

<!-- –ü—ñ–¥–≤–∞–ª -->
<footer>
    <div class="footer-container">
        <div class="footer-section">
            <h3>CookBook</h3>
            <p>–í–∞—à –ø–æ–º—ñ—á–Ω–∏–∫ —É —Å–≤—ñ—Ç—ñ –∫—É–ª—ñ–Ω–∞—Ä—ñ—ó. –ú–∏ –∑–±–∏—Ä–∞—î–º–æ –Ω–∞–π—Å–º–∞—á–Ω—ñ—à—ñ —Ä–µ—Ü–µ–ø—Ç–∏ –∑ —É—Å—å–æ–≥–æ —Å–≤—ñ—Ç—É, –∞–¥–∞–ø—Ç–æ–≤–∞–Ω—ñ –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –∫—É—Ö–Ω—ñ.</p>
            <div class="social-icons">
                <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                <a href="#" class="social-icon"><i class="fab fa-pinterest-p"></i></a>
            </div>
        </div>
        
        <div class="footer-section">
            <h3>–ù–∞–≤—ñ–≥–∞—Ü—ñ—è</h3>
            <a href="index.html">–ì–æ–ª–æ–≤–Ω–∞</a>
            <a href="strava.html">–°–º–∞—á–Ω—ñ —Å—Ç—Ä–∞–≤–∏</a>
            <a href="navfour.html">–ö—É—Ö–æ–Ω–Ω—ñ –ø–æ—Ä–∞–¥–∏</a>
            <a href="pronas.html">–ü—Ä–æ –Ω–∞—Å</a>
        </div>
        
        <div class="footer-section">
            <h3>–ö–æ–Ω—Ç–∞–∫—Ç–∏</h3>
            <p><i class="fas fa-envelope"></i> info@cookbook.ua</p>
            <p><i class="fas fa-phone"></i> +380 44 123 4567</p>
            <p><i class="fas fa-map-marker-alt"></i> –º. –ö–∏—ó–≤, –≤—É–ª. –ö—É–ª—ñ–Ω–∞—Ä–Ω–∞, 10</p>
        </div>
    </div>
    
    <div class="footer-bottom" style="text-align: center; margin-top: 50px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
        <p>¬© 2025 CookBook. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
    </div>
</footer>

<script>
// –ö–ª–∞—Å –¥–ª—è —Ä–µ—Ü–µ–ø—Ç—ñ–≤
class Recipe {
    constructor(id, title, category, time, difficulty, image, link, description) {
        this.id = id;
        this.title = title;
        this.category = category;
        this.time = time;
        this.difficulty = difficulty;
        this.image = image;
        this.link = link;
        this.description = description;
    }
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó URL –∑–æ–±—Ä–∞–∂–µ–Ω—å
function getOptimizedImageUrl(originalUrl, width = 400, quality = 85) {
    // –î–ª—è 24tv.ua
    if (originalUrl.includes('24tv.ua')) {
        // –î–ª—è 24tv.ua –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª
        return originalUrl;
    }
    
    // –î–ª—è Pexels
    if (originalUrl.includes('pexels.com')) {
        return `${originalUrl.split('?')[0]}?auto=compress&cs=tinysrgb&w=${width}&q=${quality}`;
    }
    
    // –î–ª—è —ñ–Ω—à–∏—Ö –¥–∂–µ—Ä–µ–ª - –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª
    return originalUrl;
}

// –ë–∞–∑–∞ —Ä–µ—Ü–µ–ø—Ç—ñ–≤ –∑ –≤–∞—à–∏–º–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º–∏
const recipesData = [
    new Recipe(
        1,
        '–ë–æ—Ä—â —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π',
        'soup',
        80,
        'hard',
        getOptimizedImageUrl('https://recepty.24tv.ua/resources/photos/recipe/1200x675_DIR/201912/86d3f0ec08-b061-4a2d-afa7-f053527f4f06.jpg?1582905806000'),
        'borshch.html',
        '–ö–ª–∞—Å–∏—á–Ω–∏–π —á–µ—Ä–≤–æ–Ω–∏–π –±–æ—Ä—â –∑—ñ —Å–º–µ—Ç–∞–Ω–æ—é —Ç–∞ —Å–≤—ñ–∂–æ—é –∑–µ–ª–µ–Ω–Ω—é'
    ),
    new Recipe(
        2,
        '–ü–∞–Ω–∫–µ–π–∫–∏ –∑ —è–≥–æ–¥–∞–º–∏',
        'dessert',
        25,
        'easy',
        getOptimizedImageUrl('https://images.pexels.com/photos/376464/pexels-photo-376464.jpeg?auto=compress&cs=tinysrgb&w=800&h=533&fit=crop'),
        'pancake.html',
        '–ü–æ–≤—ñ—Ç—Ä—è–Ω—ñ –º–ª–∏–Ω—Ü—ñ –∑—ñ —Å–≤—ñ–∂–∏–º–∏ —è–≥–æ–¥–∞–º–∏ —Ç–∞ —Å–æ–ª–æ–¥–∫–∏–º —Å–∏—Ä–æ–ø–æ–º'
    ),
    new Recipe(
        3,
        "–ú'—è—Å–Ω–∞ –ª–∞–∑–∞–Ω—å—è",
        'meat',
        75,
        'hard',
        getOptimizedImageUrl('https://images.pexels.com/photos/5949896/pexels-photo-5949896.jpeg?auto=compress&cs=tinysrgb&w=800&h=533&fit=crop'),
        'lasanga.html',
        "–ö–ª–∞—Å–∏—á–Ω–∞ —ñ—Ç–∞–ª—ñ–π—Å—å–∫–∞ –ª–∞–∑–∞–Ω—å—è –∑ –º'—è—Å–Ω–∏–º —Å–æ—É—Å–æ–º —Ç–∞ —Å–∏—Ä–æ–º"
    ),
    new Recipe(
        4,
        '–°–∏—Ä–Ω–∏–∫–∏',
        'dessert',
        30,
        'medium',
        getOptimizedImageUrl('https://images.pexels.com/photos/6168339/pexels-photo-6168339.jpeg?auto=compress&cs=tinysrgb&w=800&h=533&fit=crop'),
        'cheesecake.html',
        '–ù—ñ–∂–Ω—ñ —Å–∏—Ä–Ω–∏–∫–∏ –∑ —Ä–æ–¥–∑–∏–Ω–∫–∞–º–∏, –ø–æ–¥–∞—é—Ç—å—Å—è –∑—ñ —Å–º–µ—Ç–∞–Ω–æ—é'
    ),
    new Recipe(
        5,
        '–û–º–ª–µ—Ç –∑ –æ–≤–æ—á–∞–º–∏',
        'breakfast',
        20,
        'easy',
        getOptimizedImageUrl('https://images.pexels.com/photos/17198757/pexels-photo-17198757.jpeg'),
        'omlet.html',
        '–ü–æ–∂–∏–≤–Ω–∏–π —Å–Ω—ñ–¥–∞–Ω–æ–∫ –∑—ñ —Å–≤—ñ–∂–∏–º–∏ –æ–≤–æ—á–∞–º–∏ —Ç–∞ —Å–∏—Ä–æ–º'
    ),
    new Recipe(
        6,
        '–ö–∞—Ä—Ä—ñ –∑ –∫—É—Ä–∫–æ—é —Ç–∞ —Ä–∏—Å–æ–º',
        'meat',
        45,
        'medium',
        getOptimizedImageUrl('https://images.pexels.com/photos/674574/pexels-photo-674574.jpeg?auto=compress&cs=tinysrgb&w=800&h=533&fit=crop'),
        'curry.html',
        '–ê—Ä–æ–º–∞—Ç–Ω–µ –∫–∞—Ä—Ä—ñ –∑ –∫–æ–∫–æ—Å–æ–≤–∏–º –º–æ–ª–æ–∫–æ–º —Ç–∞ —Å–≤—ñ–∂–∏–º–∏ –æ–≤–æ—á–∞–º–∏'
    )
];

// –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
let likedRecipes = JSON.parse(localStorage.getItem('likedRecipes')) || [];
let caloriesData = [];
let currentFilter = 'all';
let imageObserver = null;

// –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
function toggleMenu() {
    const navButtons = document.getElementById('navButtons');
    navButtons.classList.toggle('active');
}

function toggleTheme() {
    document.body.classList.toggle('dark-theme');
    const icon = document.querySelector('.theme-switcher i');
    const isDark = document.body.classList.contains('dark-theme');
    icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
}

function filterRecipes(cat, event) {
    currentFilter = cat;
    
    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω–æ—ó –∫–Ω–æ–ø–∫–∏
    const buttons = document.querySelectorAll('.categories button');
    buttons.forEach(btn => btn.classList.remove('active'));
    
    if (event && event.target) {
        event.target.classList.add('active');
    } else {
        buttons[0].classList.add('active'); // –ü–µ—Ä—à–∞ –∫–Ω–æ–ø–∫–∞ "–£—Å—ñ"
    }
    
    renderRecipes();
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è lazy loading –∑–æ–±—Ä–∞–∂–µ–Ω—å
function initImageObserver() {
    if (imageObserver) {
        imageObserver.disconnect();
    }
    
    imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                const src = img.getAttribute('data-src');
                
                if (src) {
                    img.src = src;
                    img.onload = () => {
                        img.classList.add('loaded');
                        const container = img.closest('.recipe-img-container');
                        if (container) {
                            container.classList.remove('loading');
                        }
                    };
                    img.removeAttribute('data-src');
                }
                observer.unobserve(img);
            }
        });
    }, {
        rootMargin: '100px 0px',
        threshold: 0.1
    });
}

function renderRecipes() {
    const container = document.getElementById('recipes');
    if (!container) return;
    
    container.innerHTML = '';
    
    const filteredRecipes = currentFilter === 'all' 
        ? recipesData 
        : recipesData.filter(recipe => recipe.category === currentFilter);
    
    filteredRecipes.forEach(recipe => {
        const recipeElement = createRecipeElement(recipe);
        container.appendChild(recipeElement);
    });
    
    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á –¥–ª—è lazy loading
    initImageObserver();
    observeRecipeImages();
}

function createRecipeElement(recipe) {
    const isLiked = likedRecipes.includes(recipe.title);
    
    const div = document.createElement('a');
    div.className = 'recipe';
    div.href = recipe.link;
    
    const timeText = recipe.time >= 60 ? '60+ —Ö–≤' : `${recipe.time} —Ö–≤`;
    const categoryName = getCategoryName(recipe.category);
    
    // SVG placeholder –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
    const placeholderSVG = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%232E8B57'/%3E%3C/svg%3E`;
    
    div.innerHTML = `
        <button class="like-btn ${isLiked ? 'active' : ''}" onclick="toggleLike(event, ${recipe.id})" title="–î–æ–¥–∞—Ç–∏ –≤ —É–ª—é–±–ª–µ–Ω–µ">
            <i class="${isLiked ? 'fas' : 'far'} fa-heart"></i>
        </button>
        <div class="recipe-img-container loading">
            <img src="${placeholderSVG}"
                 data-src="${recipe.image}"
                 alt="${recipe.title}"
                 loading="lazy"
                 decoding="async"
                 class="recipe-image">
            <span class="recipe-category">${categoryName}</span>
        </div>
        <div class="recipe-content">
            <h3>${recipe.title}</h3>
            <p>${recipe.description}</p>
            <div class="recipe-time">
                <i class="far fa-clock"></i>
                <span>${timeText}</span>
            </div>
        </div>
    `;
    
    return div;
}

function observeRecipeImages() {
    if (!imageObserver) return;
    
    const images = document.querySelectorAll('.recipe-image[data-src]');
    images.forEach(img => imageObserver.observe(img));
}

function getCategoryName(category) {
    const categories = {
        'soup': '–°—É–ø–∏',
        'dessert': '–î–µ—Å–µ—Ä—Ç–∏',
        'meat': '–ú\'—è—Å–Ω—ñ',
        'vegetarian': '–í–µ–≥–µ—Ç–∞—Ä—ñ–∞–Ω—Å—å–∫—ñ',
        'breakfast': '–°–Ω—ñ–¥–∞–Ω–∫–∏'
    };
    return categories[category] || category;
}

function toggleLike(event, recipeId) {
    event.preventDefault();
    event.stopPropagation();
    
    const btn = event.target.closest('.like-btn');
    const heartIcon = btn.querySelector('i');
    const recipe = recipesData.find(r => r.id === recipeId);
    
    if (!recipe) return;
    
    btn.classList.toggle('active');
    if (btn.classList.contains('active')) {
        heartIcon.className = 'fas fa-heart';
        if (!likedRecipes.includes(recipe.title)) {
            likedRecipes.push(recipe.title);
        }
    } else {
        heartIcon.className = 'far fa-heart';
        likedRecipes = likedRecipes.filter(title => title !== recipe.title);
    }
    
    localStorage.setItem('likedRecipes', JSON.stringify(likedRecipes));
}

// –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –æ–¥–∏–Ω–∏—Ü—å
function openConverter() {
    document.getElementById('converterModal').style.display = 'flex';
}

function closeConverter() {
    document.getElementById('converterModal').style.display = 'none';
}

function convertUnits() {
    const value = parseFloat(document.getElementById('converterValue').value) || 0;
    const fromUnit = document.getElementById('fromUnit').value;
    const toUnit = document.getElementById('toUnit').value;
    
    const conversions = {
        grams: 1,
        ml: 1,
        cups: 240,
        tbsp: 15,
        tsp: 5
    };
    
    let result;
    if (fromUnit === toUnit) {
        result = value;
    } else {
        const inBase = value * conversions[fromUnit];
        result = inBase / conversions[toUnit];
    }
    
    document.getElementById('converterResult').value = result.toFixed(2);
}

// –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∫–∞–ª–æ—Ä—ñ–π
function showCalorieCalculator() {
    document.getElementById('calorieModal').style.display = 'flex';
    loadCalorieIngredients();
}

function closeCalorieCalculator() {
    document.getElementById('calorieModal').style.display = 'none';
}

function loadCalorieIngredients() {
    const container = document.getElementById('calorieIngredients');
    container.innerHTML = '';
    
    if (caloriesData.length === 0) {
        container.innerHTML = '<p style="color: var(--text-light); text-align: center; padding: 20px;">–î–æ–¥–∞–π—Ç–µ —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç–∏ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –∫–∞–ª–æ—Ä—ñ–π</p>';
        updateTotalCalories();
        return;
    }
    
    caloriesData.forEach((item, index) => {
        const div = document.createElement('div');
        div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 10px; margin-bottom: 10px; background: var(--light); border-radius: 8px; border: 1px solid var(--primary-light);';
        div.innerHTML = `
            <div>
                <strong style="font-size: 14px;">${item.name}</strong>
                <div style="font-size: 12px; color: var(--text-light);">
                    ${item.weight}–≥ √ó ${item.caloriesPer100g} –∫–∫–∞–ª/100–≥ = <strong>${Math.round(item.calories)} –∫–∫–∞–ª</strong>
                </div>
            </div>
            <button onclick="removeIngredient(${index})" style="background: #ff4757; color: white; border: none; border-radius: 50%; width: 25px; height: 25px; cursor: pointer; font-size: 12px;">
                <i class="fas fa-times"></i>
            </button>
        `;
        container.appendChild(div);
    });
    
    updateTotalCalories();
}

function addIngredient() {
    const name = document.getElementById('newIngredient').value.trim();
    const weight = parseFloat(document.getElementById('newWeight').value);
    
    if (!name || !weight) {
        alert('–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É —ñ–Ω–≥—Ä–µ–¥—ñ—î–Ω—Ç—É —Ç–∞ –≤–∞–≥—É');
        return;
    }
    
    const caloriesPer100g = getCaloriesForIngredient(name);
    const calories = (weight * caloriesPer100g) / 100;
    
    caloriesData.push({
        name: name,
        weight: weight,
        caloriesPer100g: caloriesPer100g,
        calories: calories
    });
    
    document.getElementById('newIngredient').value = '';
    document.getElementById('newWeight').value = '';
    loadCalorieIngredients();
}

function getCaloriesForIngredient(name) {
    const lowerName = name.toLowerCase();
    
    const calorieDatabase = {
        '–∫—É—Ä–∫': 165, '—Å–≤–∏–Ω': 250, '—è–ª–æ–≤–∏—á': 250,
        '—Ä–∏–±': 100, '—Å–∏—Ä': 350, '–º–æ–ª–æ–∫': 42,
        '—è–π—Ü': 155, '—Ä–∏—Å': 130, '–∫–∞—Ä—Ç–æ–ø': 77,
        '–æ–≤–æ—á': 30, '—Ñ—Ä—É–∫—Ç': 50, '–≥–æ—Ä—ñ—Ö': 654,
        '–±–æ—Ä–æ—à–Ω–æ': 364, '—Ü—É–∫–æ—Ä': 387, '–º–∞—Å–ª–æ': 717,
        '–æ–ª—ñ—è': 884, '—Å–º–µ—Ç–∞–Ω–∞': 206, '–∫–µ—Ñ—ñ—Ä': 41,
        '—Ç–æ–º–∞—Ç': 18, '—Ü–∏–±—É–ª—è': 40, '—á–∞—Å–Ω–∏–∫': 149
    };
    
    for (const [key, value] of Object.entries(calorieDatabase)) {
        if (lowerName.includes(key)) {
            return value;
        }
    }
    
    return 150;
}

function removeIngredient(index) {
    caloriesData.splice(index, 1);
    loadCalorieIngredients();
}

function updateTotalCalories() {
    const total = caloriesData.reduce((sum, item) => sum + item.calories, 0);
    document.getElementById('totalCalories').textContent = Math.round(total) + ' –∫–∫–∞–ª';
}

// –ü—ñ–¥–±—ñ—Ä —Ä–µ—Ü–µ–ø—Ç—ñ–≤
function showRecipeFinder() {
    const finder = document.getElementById('recipeFinder');
    if (finder) {
        finder.scrollIntoView({ behavior: 'smooth' });
    }
}

function findRecipe() {
    const timeSelect = document.getElementById('time');
    const difficultySelect = document.getElementById('difficulty');
    const categorySelect = document.getElementById('category');
    
    const timeValue = timeSelect ? timeSelect.value : '';
    const difficultyValue = difficultySelect ? difficultySelect.value : '';
    const categoryValue = categorySelect ? categorySelect.value : '';
    
    let recommendations = [];
    
    recipesData.forEach(recipe => {
        let match = true;
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–∞—Å—É
        if (timeValue) {
            const timeNum = parseInt(timeValue);
            if (timeNum === 30 && recipe.time > 30) match = false;
            if (timeNum === 60 && recipe.time > 60) match = false;
            if (timeNum === 120 && recipe.time <= 60) match = false;
        }
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ
        if (difficultyValue && recipe.difficulty !== difficultyValue) {
            match = false;
        }
        
        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
        if (categoryValue && recipe.category !== categoryValue) {
            match = false;
        }
        
        if (match) {
            recommendations.push(recipe);
        }
    });
    
    const resultDiv = document.getElementById('finderResult');
    if (!resultDiv) return;
    
    resultDiv.style.display = 'block';
    
    if (recommendations.length > 0) {
        let html = '<h4>–ó–Ω–∞–π–¥–µ–Ω—ñ —Ä–µ—Ü–µ–ø—Ç–∏:</h4>';
        
        recommendations.forEach(recipe => {
            const timeText = recipe.time >= 60 ? '60+ —Ö–≤' : `${recipe.time} —Ö–≤`;
            const difficultyText = getDifficultyText(recipe.difficulty);
            
            html += `
                <a href="${recipe.link}" class="finder-recipe-link">
                    <div style="padding: 15px; margin-top: 10px; background: rgba(255, 255, 255, 0.2); border-radius: 8px; border: 1px solid var(--primary-light);">
                        <strong>${recipe.title}</strong>
                        <div style="color: rgba(255, 255, 255, 0.8); font-size: 14px; margin-top: 5px; display: flex; gap: 10px; flex-wrap: wrap;">
                            <span><i class="far fa-clock"></i> ${timeText}</span>
                            <span><i class="fas fa-signal"></i> ${difficultyText}</span>
                            <span><i class="fas fa-utensils"></i> ${getCategoryName(recipe.category)}</span>
                        </div>
                    </div>
                </a>
            `;
        });
        
        resultDiv.innerHTML = html;
    } else {
        resultDiv.innerHTML = '<p>–ù–µ –∑–Ω–∞–π–¥–µ–Ω–æ —Ä–µ—Ü–µ–ø—Ç—ñ–≤, —è–∫—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –≤–∞—à–∏–º –∫—Ä–∏—Ç–µ—Ä—ñ—è–º. –°–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–æ—à—É–∫—É.</p>';
    }
}

function getDifficultyText(difficulty) {
    const difficulties = {
        'easy': '–õ–µ–≥–∫–æ',
        'medium': '–°–µ—Ä–µ–¥–Ω—è',
        'hard': '–°–∫–ª–∞–¥–Ω–æ'
    };
    return difficulties[difficulty] || difficulty;
}

// –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
let isThrottled = false;

function throttledScroll() {
    if (!isThrottled) {
        isThrottled = true;
        
        // –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö
        if (window.innerWidth <= 768) {
            document.body.style.overflow = 'hidden';
        }
        
        setTimeout(() => {
            isThrottled = false;
            if (window.innerWidth <= 768) {
                document.body.style.overflow = '';
            }
        }, 50);
    }
}

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
document.addEventListener('DOMContentLoaded', function() {
    // –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–µ–º–∏
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
        document.body.classList.add('dark-theme');
        const icon = document.querySelector('.theme-switcher i');
        if (icon) icon.className = 'fas fa-sun';
    }
    
    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ä–µ—Ü–µ–ø—Ç—ñ–≤
    renderRecipes();
    
    // –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π
    const converterValue = document.getElementById('converterValue');
    const fromUnit = document.getElementById('fromUnit');
    const toUnit = document.getElementById('toUnit');
    
    if (converterValue) {
        converterValue.addEventListener('input', convertUnits);
    }
    if (fromUnit) {
        fromUnit.addEventListener('change', convertUnits);
    }
    if (toUnit) {
        toUnit.addEventListener('change', convertUnits);
    }
    
    // –û–±—Ä–æ–±–∫–∞ Enter –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ñ –∫–∞–ª–æ—Ä—ñ–π
    const newIngredient = document.getElementById('newIngredient');
    const newWeight = document.getElementById('newWeight');
    
    if (newIngredient && newWeight) {
        newIngredient.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addIngredient();
        });
        newWeight.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addIngredient();
        });
    }
    
    // –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π —Å–∫—Ä–æ–ª
    window.addEventListener('scroll', throttledScroll, { passive: true });
    
    // –ü—Ä–µ–¥–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
    setTimeout(() => {
        const firstImages = recipesData.slice(0, 3).map(recipe => recipe.image);
        firstImages.forEach(src => {
            const img = new Image();
            img.src = src;
        });
    }, 100);
});

// –ó–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω
window.addEventListener('click', function(event) {
    const converterModal = document.getElementById('converterModal');
    const calorieModal = document.getElementById('calorieModal');
    
    if (event.target === converterModal) {
        closeConverter();
    }
    if (event.target === calorieModal) {
        closeCalorieCalculator();
    }
});

// –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å
document.addEventListener('error', function(e) {
    if (e.target.tagName === 'IMG' && e.target.classList.contains('recipe-image')) {
        const container = e.target.closest('.recipe-img-container');
        if (container) {
            container.classList.remove('loading');
            // –ó–∞–º—ñ–Ω—é—î–º–æ –Ω–∞ placeholder –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
            e.target.src = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='300' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%233CB371'/%3E%3Ctext x='50%' y='50%' font-family='Arial' font-size='18' fill='white' text-anchor='middle' dominant-baseline='middle'%3E–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–æ—Å—å%3C/text%3E%3C/svg%3E`;
        }
    }
}, true);
</script>

</body>
</html>
